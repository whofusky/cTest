Ly8jaW5jbHVkZSA8c3RkaW8uaD4KI2luY2x1ZGUgPHN0ZGxpYi5oPgojaW5jbHVkZSA8c3RyaW
5nLmg+CgojaW5jbHVkZSAiQ3VzdG9tT3V0TG9nLmgiCi8vI2luY2x1ZGUgImxpYmJhc2U2NC5o
IgojaW5jbHVkZSAiRmlsZVRvQmFzZTY0LmgiCgoKCmludCBtYWluKGludCBhcmdjLCBjaGFyIC
oqYXJndikgewoKICAgIAogICAgaW50IHJldCA9IDA7CgogICAgLy9jX3dyaXRlX2xvZyhfREVC
VUcsImFyZ2NbJWRdLGFyZ3YwPVslc10scmV0PVslZF0iLGFyZ2MsYXJndlswXSxyZXQpOwogIC
AgLy9mb3IoIGludCBpID0gMDsgaSA8IGFyZ2M7IGkrKykgewogICAgLy8gICAgY193cml0ZV9s
b2coX0RFQlVHLCJhcmd2WyVkXT1bJXNdIiwgaSwgYXJndltpXSk7CiAgICAvL30KCiAgICBpZi
AoIGFyZ2MgIT0gMyApIHsKICAgICAgICBjX3dyaXRlX2xvZyhfRVJST1IsInVzYWdlOlxuICVz
IDxlbi9kZS9lbmYvZGVmPiA8c3RyaW5nL2ZpbGU+XG4iLCBhcmd2WzBdKTsKICAgICAgICByZX
R1cm4gMTsKICAgIH0KICAgIGludCBlbkZsYWcgPSBzdHJjbXAoIGFyZ3ZbMV0sImVuIiApOwog
ICAgaW50IGRlRmxhZyA9ICBzdHJjbXAoIGFyZ3ZbMV0sICJkZSIgKTsKICAgIGludCBlbmZGbG
FnID0gc3RyY21wKCBhcmd2WzFdLCJlbmYiICk7CiAgICBpbnQgZGVmRmxhZyA9ICBzdHJjbXAo
IGFyZ3ZbMV0sICJkZWYiICk7CgogICAgY193cml0ZV9sb2coX0RFQlVHLAogICAgICAgICAgIC
AiZW5GbGFnWyVkXSxkZUZsYWdbJWRdLGVuZkZsYWdbJWRdLGRlZkZsYWdbJWRdIiwgCiAgICAg
ICAgICAgIGVuRmxhZywgZGVGbGFnLGVuZkZsYWcsZGVmRmxhZyk7CgogICAgaWYgKCBlbkZsYW
cgIT0gMCAmJiBkZUZsYWcgIT0gMCAmJiBlbmZGbGFnICE9IDAgJiYgZGVmRmxhZyAhPSAwICkg
ewogICAgICAgIGNfd3JpdGVfbG9nKF9FUlJPUiwKICAgICAgICAgICAgICAgICJ1c2FnZTpcbi
AlcyA8ZW4vZGUvZW5mL2RlZj4gPHN0cmluZy9maWxlPlxuIiwgCiAgICAgICAgICAgICAgICBh
cmd2WzBdKTsKICAgICAgICByZXR1cm4gMjsKICAgIH0KICAgIGludCBzcmNMZW49IHN0cmxlbi
ggYXJndlsyXSApOwogICAgY2hhciBidWZbMTAyNF0gPSB7MH07CiAgICBzaXplX3Qgb3V0bGVu
ID0gMDsKCiAgICBpZiAoIGVuRmxhZyA9PSAwICkgeyAvL1tzdHJpbmcgZW5jb2RlXTogb3JpZ2
luYWwgdHJpbmcgLS0+IGJhc2U2NCBzdHJpbmcKCiAgICAgICAgLy9UaGUgYnVmZmVyIGluIGBv
dXRgIGhhcyBiZWVuIGFsbG9jYXRlZCBieSB0aGUgY2FsbGVyIGFuZCBpcyBhdCBsZWFzdCA0Lz
MgdGhlCiAgICAgICAgLy9zaXplIG9mIHRoZSBpbnB1dC4KICAgICAgICAvLwogICAgICAgIC8v
5Lmf5bCx5piv6K+0OiBvdXTpnIDopoHoh6rlt7HnlLPor7fnqbrpl7TlpKflsI8s5LiU5aSn5b
CP6ZyA6KaB5aSn5LqO6L6T5YWlc3Jj6ZW/5bqm55qENC8zCiAgICAgICAgLy/lu7rorq7nlLPo
r7fnqbrpl7TkuLogKCBzdHJsZW4oc3JjKSAqICg0LzMpICkgKyAxNgoKICAgICAgICAvL3ZvaW
QgQkFTRTY0X0VYUE9SVCBiYXNlNjRfZW5jb2RlCiAgICAgICAgLy8gICAgKCBjb25zdCBjaGFy
CQkqc3JjCiAgICAgICAgLy8gICAgLCBzaXplX3QJCSBzcmNsZW4KICAgICAgICAvLyAgICAsIG
NoYXIJCQkqb3V0CiAgICAgICAgLy8gICAgLCBzaXplX3QJCSpvdXRsZW4KICAgICAgICAvLyAg
ICAsIGludAkJCSBmbGFncwogICAgICAgIC8vICAgICkgOwoKICAgICAgICBiYXNlNjRfZW5jb2
RlKGFyZ3ZbMl0sc3JjTGVuLCBidWYsICZvdXRsZW4sIDAgKTsKCiAgICAgICAgY193cml0ZV9s
b2coX0lORk8sCiAgICAgICAgICAgICAgICAic3JjPVslc10sc3JjX2xlbj1bJWRdLGVuY29kZT
1bJXNdLGVuY29kZV9sZW49WyVsZF0iLAogICAgICAgICAgICAgICAgYXJndlsyXSwgc3JjTGVu
LCBidWYsIG91dGxlbiApOwogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIGlmICggZGVGbG
FnID09IDAgKSB7IC8vW3N0cmluZyBkZWNvZGVdOiBiYXNlNjQgc3RyaW5nIC0tPiBvcmlnaW5h
bCBzdHJpbmcKCiAgICAgICAgLy9UaGUgYnVmZmVyIGluIGBvdXRgIGhhcyBiZWVuIGFsbG9jYX
RlZCBieSB0aGUgY2FsbGVyIGFuZCBpcyBhdCBsZWFzdCAzLzQgdGhlCiAgICAgICAgLy9zaXpl
IG9mIHRoZSBpbnB1dAogICAgICAgIC8vCiAgICAgICAgLy/kuZ/lsLHmmK/or7Q6IG91dOmcgO
imgeiHquW3seeUs+ivt+epuumXtOWkp+WwjyzkuJTlpKflsI/pnIDopoHlpKfkuo7ovpPlhaVz
cmPplb/luqbnmoQzLzQKCiAgICAgICAgLy9pbnQgQkFTRTY0X0VYUE9SVCBiYXNlNjRfZGVjb2
RlCiAgICAgICAgLy8gICAgKCBjb25zdCBjaGFyCQkqc3JjCiAgICAgICAgLy8gICAgLCBzaXpl
X3QJCSBzcmNsZW4KICAgICAgICAvLyAgICAsIGNoYXIJCQkqb3V0CiAgICAgICAgLy8gICAgLC
BzaXplX3QJCSpvdXRsZW4KICAgICAgICAvLyAgICAsIGludAkJCSBmbGFncwogICAgICAgIC8v
ICAgICkgOwogICAgICAgIHJldCA9IGJhc2U2NF9kZWNvZGUoYXJndlsyXSxzcmNMZW4sIGJ1Zi
wgJm91dGxlbiwgMCApOwogICAgICAgIGNfd3JpdGVfbG9nKF9JTkZPLAogICAgICAgICAgICAg
ICAgInNyYz1bJXNdLHNyY19sZW49WyVkXSxkZWNvZGU9WyVzXSxkZWNvZGVfbGVuPVslbGRdLH
JldD1bJWRdIiwKICAgICAgICAgICAgICAgIGFyZ3ZbMl0sIHNyY0xlbiwgYnVmLCBvdXRsZW4s
IHJldCApOwogICAgICAgIHJldHVybiAwOwogICAgfQoKICAgIENfRkI2NCBmYjY0KDc0KTsKIC
AgIGlmICggZW5mRmxhZyA9PSAwICkgeyAvL1tmaWxlIGVuY29kZV06IG9yaWdpbmFsIGZpbGUg
LS0+IGJhc2U2NCBmaWxlLmVuY29kZQogICAgICAgIHJldD0gZmI2NC5lbmNvZGVfZmlsZSggYX
JndlsyXSApOwogICAgICAgIGNfd3JpdGVfbG9nKF9JTkZPLAogICAgICAgICAgICAgICAgImVu
Y29kZV9maWxlWyVzXSxyZXQ9WyVkXSIsCiAgICAgICAgICAgICAgICBhcmd2WzJdLCAgcmV0IC
k7CiAgICAgICAgcmV0dXJuIHJldDsKICAgIH0KCiAgICBpZiAoIGRlZkZsYWcgPT0gMCApIHsg
Ly9bZmlsZSBkZWNvZGVdOiBiYXNlNjQgZmlsZSAtLT4gb3JpZ2luYWwgZmlsZS5kZWNvZGUKIC
AgICAgICByZXQ9IGZiNjQuZGVjb2RlX2ZpbGUoIGFyZ3ZbMl0gKTsKICAgICAgICBjX3dyaXRl
X2xvZyhfSU5GTywKICAgICAgICAgICAgICAgICJkZWNvZGVfZmlsZVslc10scmV0PVslZF0iLA
ogICAgICAgICAgICAgICAgYXJndlsyXSwgIHJldCApOwogICAgICAgIHJldHVybiByZXQ7CiAg
ICB9CgogICAgCgoKICAgIHJldHVybiAwOwp9Cg==
